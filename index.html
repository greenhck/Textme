<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aura Market | Global Celebrity Index</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Chart.js for sparkline trend graphs -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Google Fonts: Inter & IBM Plex Mono -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&family=IBM+Plex+Mono:wght@400;500&display=swap" rel="stylesheet">
    
    <style>
        /*
        ========================================
        PROFESSIONAL UI STYLES
        - Deep, multi-layered dark theme
        - Data-focused typography
        - Subtle gradients and borders for a premium feel
        - Responsive layout for all devices
        ========================================
        */
        :root {
            --background-dark: #0D1117;
            --background-light: #161B22;
            --border-color: #30363D;
            --text-primary: #C9D1D9;
            --text-secondary: #8B949E;
            --accent-green: #238636;
            --accent-green-glow: #23863655;
            --accent-red: #DA3633;
            --accent-red-glow: #DA363355;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--background-dark);
            color: var(--text-primary);
        }
        
        /* Use a monospaced font for all numerical data for alignment and a technical look */
        .font-mono {
            font-family: 'IBM Plex Mono', monospace;
        }

        .main-container {
            border: 1px solid var(--border-color);
            background: linear-gradient(145deg, var(--background-light), var(--background-dark));
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
        }

        /* Table header styles */
        .aura-table th {
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-secondary);
            border-bottom: 2px solid var(--border-color);
        }
        
        /* Table row styles */
        .aura-table tbody tr {
            border-bottom: 1px solid var(--border-color);
            transition: background-color 0.2s ease-in-out;
        }

        .aura-table tbody tr:last-child {
            border-bottom: none;
        }

        .aura-table tbody tr:hover {
            background-color: rgba(255, 255, 255, 0.03);
        }

        /* Green/Red text styling */
        .text-gain { color: #3FB950; }
        .text-loss { color: #F85149; }
        
        /* Loading spinner animation */
        .spinner {
            border: 4px solid var(--border-color);
            border-top: 4px solid var(--text-primary);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="antialiased">

    <div class="min-h-screen w-full p-4 sm:p-6 lg:p-8">
        <div class="max-w-7xl mx-auto">
            
            <!-- Header Section -->
            <header class="mb-6 pb-4 border-b border-gray-800">
                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center">
                    <div>
                        <h1 class="text-3xl sm:text-4xl font-black tracking-tighter text-white">AURA MARKET</h1>
                        <p class="mt-1 text-lg text-gray-400">Global Influence Index</p>
                    </div>
                    <div id="last-updated" class="text-right mt-3 sm:mt-0 px-3 py-1.5 bg-gray-800/50 border border-gray-700 rounded-md text-sm">
                        <!-- Last Updated time will be injected here -->
                    </div>
                </div>
            </header>

            <!-- Main Content: Aura Leaderboard -->
            <main>
                <div class="main-container rounded-xl overflow-hidden">
                    <div class="overflow-x-auto">
                        <table class="min-w-full aura-table">
                            <thead class="bg-black/20">
                                <tr>
                                    <th class="p-4 text-center">#</th>
                                    <th class="p-4 text-left">Celebrity</th>
                                    <th class="p-4 text-right">Aura Score</th>
                                    <th class="p-4 text-right">Change (24h)</th>
                                    <th class="p-4 text-right">Vibe</th>
                                    <th class="p-4 text-center" style="width: 150px;">7-Day Trend</th>
                                </tr>
                            </thead>
                            <tbody id="leaderboard-body">
                                <!-- Loading State -->
                                <tr>
                                    <td colspan="6" class="text-center p-16">
                                        <div class="flex flex-col items-center justify-center gap-4">
                                            <div class="spinner"></div>
                                            <span class="text-gray-400">Fetching Market Data...</span>
                                        </div>
                                    </td>
                                </tr>
                                <!-- Celebrity data will be injected here by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
                <footer class="text-center mt-6 text-xs text-gray-500">
                    <p>Aura scores are algorithmically generated based on public data analysis. Market data updated daily at 12:00 PM IST.</p>
                </footer>
            </main>
        </div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const tableBody = document.getElementById('leaderboard-body');
        const lastUpdatedEl = document.getElementById('last-updated');

        /**
         * Fetches aura data from the external JSON file.
         * This is designed to be called once on page load.
         */
        async function fetchAuraData() {
            try {
                // Fetch the data from the local JSON file.
                // In a real web server environment, this path would be relative to the root.
                const response = await fetch('aura-data.json');
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const data = await response.json();
                
                // Update the 'Last Updated' timestamp
                const updateTime = new Date(data.lastUpdated);
                lastUpdatedEl.innerHTML = `
                    <span class="font-semibold text-gray-300">Last Updated:</span> 
                    <span class="font-mono text-gray-400">${updateTime.toLocaleDateString()} @ ${updateTime.toLocaleTimeString()}</span>
                `;

                // Render the table with the fetched celebrity data
                renderTable(data.celebrities);

            } catch (error) {
                console.error("Failed to fetch or process market data:", error);
                tableBody.innerHTML = `<tr><td colspan="6" class="text-center p-16 text-loss">
                    <p class="font-semibold">Error: Could not load market data.</p>
                    <p class="text-sm text-gray-500 mt-2">Please ensure 'aura-data.json' is available and correctly formatted.</p>
                </td></tr>`;
            }
        }

        /**
         * Renders the leaderboard table with the provided data.
         * @param {Array} celebrities - The array of celebrity data objects.
         */
        function renderTable(celebrities) {
            // Sort data by aura score in descending order
            const sortedData = [...celebrities].sort((a, b) => b.aura - a.aura);
            
            tableBody.innerHTML = ''; // Clear loading state

            sortedData.forEach((celeb, index) => {
                const rank = index + 1;
                const trendColorClass = celeb.trend === 'up' ? 'text-gain' : 'text-loss';
                
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td class="p-4 text-center font-medium text-gray-500">${rank}</td>
                    <td class="p-4 font-bold text-lg whitespace-nowrap">${celeb.name}</td>
                    <td class="p-4 text-right font-mono text-lg">${celeb.aura.toFixed(2)}</td>
                    <td class="p-4 text-right font-mono ${trendColorClass}">${celeb.change >= 0 ? '+' : ''}${celeb.change.toFixed(2)}</td>
                    <td class="p-4 text-right font-mono font-semibold ${trendColorClass}">${celeb.vibe}</td>
                    <td class="p-4">
                        <div class="w-full h-10 mx-auto">
                            <canvas id="chart-${rank}"></canvas>
                        </div>
                    </td>
                `;
                
                tableBody.appendChild(row);
                
                // We need to create the chart after the row is added to the DOM
                createSparkline(rank, celeb.history, celeb.trend);
            });
        }

        /**
         * Creates a mini chart (sparkline) for the 7-day trend.
         * @param {number} rank - The rank of the celebrity, used for unique canvas ID.
         * @param {Array<number>} history - The array of historical aura data.
         * @param {string} trend - 'up' or 'down', to color the chart.
         */
        function createSparkline(rank, history, trend) {
            const ctx = document.getElementById(`chart-${rank}`).getContext('2d');
            const chartColor = trend === 'up' ? '#3FB950' : '#F85149';

            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: Array(history.length).fill(''),
                    datasets: [{
                        data: history,
                        borderColor: chartColor,
                        borderWidth: 2.5,
                        pointRadius: 0, // Hide points
                        tension: 0.4 // Smoothen the line
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: { enabled: false }
                    },
                    scales: {
                        x: { display: false },
                        y: { display: false }
                    }
                }
            });
        }

        // Initialize the application
        fetchAuraData();
    });
    </script>

</body>
</html>

